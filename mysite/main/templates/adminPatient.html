{% extends 'base.html' %}

{% block title %}Search for a patient{% endblock %}

{% block css %}
<style>
    .search-input:placeholder-shown {
        font-style: italic;
    }
    td {
        background-color: white;
        text-align: center;
  
}

th {
    background-color: white;
  text-align: center;
}

tbody{
    background-color: white;
}
</style>
{% endblock %}

{% block content %}
{% load static %}
<h1><img src="{% static '/user.png' %}" alt="" style="height: 40px;width: auto; margin-right: 10px;">Search for a patient</h1>
<p>You can search for a patient by their phone number or their name</p>
<form method="post" class="d-flex" style="margin-bottom: 20px;">
    {% csrf_token %}
    <input class="form-control me-2 search-input" type="search" placeholder="Enter a phone number" value="{{nb}}" aria-label="Search" name="phoneNb">
    <button class="btn btn-outline-primary" type="submit" name="search-phoneNb" value="phoneNb">Search by phone number</button>
</form>
<form method="post" class="d-flex" style="margin-bottom: 20px;">
    {% csrf_token %}
    <input class="form-control me-2 search-input" type="search" placeholder="Enter a name" value="{{namefield}}" aria-label="Search" name="name">
    <button class="btn btn-outline-primary" type="submit" name="search-name" value="name">Search by name</button>
</form>

<h3>Search results</h3>
{% if found %}


<table class="table table-bordered">

    <tr>
        <th style="width:20%;">Full Name</th>
        <th style="width:10%;">ID #</th>
        <th style="width:35%;">Dose 1 Date</th>
        <th style="width:35%;">Dose 2 Date</th>
    </tr>
    {% for patient in results %}
    <tr>
        <td>{{patient.name}}</td>
        <td>{{patient.ID_nbr}}</td>

        {% if patient.doseOne %}
        <td>{{patient.doseOneDate}}</td>
        {% else %}
        <td>Scheduled for {{patient.doseOneDate}} at {{patient.doseOneTime}}</td>
        {%endif%}

        {% if patient.doseTwoDate == None %}
        <td>Not scheduled yet</td>
        {% else %}
        {% if patient.doseTwo %}
        <td>{{patient.doseTwoDate}}</td>
        {% else %}
        <td>Scheduled for {{patient.doseTwoDate}} at {{patient.doseTwoTime}}</td>
        {%endif%}
        {%endif%}
    </tr>
    {% endfor %}
</table>

{% else %}
<p>No patients found with given info</p>
{% endif %}
{% endblock %}